<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ğŸ§ª ã‚·ãƒ³ãƒ—ãƒ«ã‚µã‚¦ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #222; color: white; }
        button { padding: 15px 30px; margin: 10px; border: none; border-radius: 5px; background: #4CAF50; color: white; cursor: pointer; font-size: 16px; }
        button:hover { background: #45a049; }
        #console { background: #111; padding: 15px; border-radius: 5px; height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>ğŸ§ª ã‚·ãƒ³ãƒ—ãƒ«ã‚µã‚¦ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ</h1>
    
    <div>
        <button onclick="testSimpleSound()">ğŸµ ã‚·ãƒ³ãƒ—ãƒ«éŸ³å†ç”Ÿ</button>
        <button onclick="testMultipleSounds()">ğŸ¶ è¤‡æ•°éŸ³å†ç”Ÿ</button>
        <button onclick="checkState()">ğŸ“Š çŠ¶æ…‹ç¢ºèª</button>
        <button onclick="clearConsole()">ğŸ§¹ ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
    </div>
    
    <div id="console"></div>

    <script src="sound_simple.js"></script>
    <script>
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ãƒšãƒ¼ã‚¸ã«è¡¨ç¤º
        const originalLog = console.log;
        const originalError = console.error;
        
        function addToConsole(message, type = 'log') {
            const consoleDiv = document.getElementById('console');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#ff4444' : type === 'warn' ? '#ffaa00' : '#ffffff';
            consoleDiv.innerHTML += `<span style="color: ${color}">[${timestamp}] ${message}</span>\n`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        async function testSimpleSound() {
            console.log('ğŸ§ª ã‚·ãƒ³ãƒ—ãƒ«éŸ³ãƒ†ã‚¹ãƒˆé–‹å§‹...');
            if (window.simpleSoundManager) {
                await window.simpleSoundManager.playSound(440, 0.5);
            } else {
                console.error('âŒ simpleSoundManagerãŒå­˜åœ¨ã—ã¾ã›ã‚“');
            }
        }
        
        async function testMultipleSounds() {
            console.log('ğŸ§ª è¤‡æ•°éŸ³ãƒ†ã‚¹ãƒˆé–‹å§‹...');
            if (window.simpleSoundManager) {
                const notes = [261, 294, 329, 349]; // C-D-E-F
                for (let i = 0; i < notes.length; i++) {
                    setTimeout(() => {
                        window.simpleSoundManager.playSound(notes[i], 0.3);
                    }, i * 200);
                }
            } else {
                console.error('âŒ simpleSoundManagerãŒå­˜åœ¨ã—ã¾ã›ã‚“');
            }
        }
        
        function checkState() {
            console.log('ğŸ“Š çŠ¶æ…‹ç¢ºèª:');
            console.log('  - window.simpleSoundManager:', !!window.simpleSoundManager);
            if (window.simpleSoundManager) {
                console.log('  - isReady:', window.simpleSoundManager.isReady);
                console.log('  - audioContext:', !!window.simpleSoundManager.audioContext);
                if (window.simpleSoundManager.audioContext) {
                    console.log('  - audioContext.state:', window.simpleSoundManager.audioContext.state);
                }
            }
        }
        
        function clearConsole() {
            document.getElementById('console').innerHTML = '';
        }
        
        // åˆæœŸçŠ¶æ…‹è¡¨ç¤º
        setTimeout(() => {
            console.log('ğŸ§ª ã‚·ãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
            checkState();
        }, 100);
    </script>
</body>
</html>